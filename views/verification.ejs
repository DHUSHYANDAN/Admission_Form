<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
   
    <title>verification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>

  body{
    background-image: url('/firo.jpeg');
    background-size: cover; 
        height: 100%;
        background-repeat: no-repeat;
        margin: auto auto auto auto;      
}

/* Navigation Styles */
  /* Navigation Styles */
  .navbars {
    padding: 5px;
 
  }
  
  .navigate {
    display: flex;
  
    justify-content: space-between;
    background-image: url("/banner_bg.png");
    background-size: cover;
    align-items: center;
  }
  
  .logo {
    padding: 6px;
    width:200px;
    height: auto;
  }
 
  .logo-text {
    color: yellow;
    padding-left: 5px;
  }
  
  .web {
    position: relative;
  
    padding: 10px;
    
    text-decoration: none;
    font-size: 17px;
    overflow: hidden;
  }
  
  .web a {
    color: #f2f2f2;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 20px;
    border-radius: 5px;
    padding-top: 5px;
    padding-bottom: 5px;
    margin: 1% 20px;
  }
  
  .web a:hover {
    background-color: #ddd;
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
    color: black;
  }


  .menu-line {
    height: 4px;
    width: 20px;
    margin-bottom: 3px;
    margin-right: 20px;
    background-color: white;
  }
  
  .menu {
    display: none;
    cursor: pointer;
  }
  
  @media (max-width: 790px) {
    .web a {
      display: none;
    }
  
    .menu {
      display: block;
    }
    .logo{
      max-width:100%;
    }
    .navmobg{
      background-color: rgba(0, 0, 0, 0.6);
      height:100%;
      width:100%;
      position:absolute;
      display:none;
      z-index:2;
    }
  }
  @media (min-width:790px){
    .navmob{
      display:none;
    }
  }
  @media (max-width:520px){
    .navmob{
      width: 50%;
    }
  }
  @media (min-width:520px){
     .navmob{
      width: 250px;
    }
  }
  .webmob a{
    display:block;
    background:rgba(0, 0, 0, 0.8); 
    padding: 15px 0px 15px 0px ;
    text-align:center;
    text-decoration: none;
    color:white;
    font-size: 20px;
    border-radius: 5px;
    margin: 8% 20px;
    }
    .webmob a:hover{
      background:red;
      color:white;
    }
  .ltmob{background-image: url("/banner_bg.png");
  padding:3px;}
 
  .navmob {
    background-color: white;
    height:100%;
    
    position:absolute;
  
    border: solid 1px lightgreen;
  }
  *{z-index:1;position:relative;} 



   .container-sm{
            background-color: rgba(255, 255, 255, 0.991);
          padding: 50px;
            border-radius: 10px;
        }
        
.form-group {
    margin-bottom: 20px;
}

label {
  font-weight: bold;
   
}
button {
    padding: 10px 20px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}
@media (min-width: 780px) {
  .container-sm input,.form-control{ width: 75%;
}.container-sm{padding-left: px;border: red solid;width: 70%;}
.b{text-align: left;margin-left: 110px;}
}

@media (max-width: 580px) {
  .container{padding: 10%;}
  
}
@media (max-width: 780px) {
 .b{text-align: left;}
}
</style>
<body>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
           const mobclosebg = document.querySelector('.navmobg');
           const mobclose = document.getElementById('redmob');
     const mobopen=document.querySelector('.menu');
           mobclose.addEventListener('click', function() {
             mobclosebg.style.display = 'none';
           });
           mobopen.addEventListener('click', function() {
             mobclosebg.style.display = 'block';
           });
           mobclosebg.addEventListener('click', function(e) {
             if (e.target === mobclosebg) {
               mobclosebg.style.display = 'none';
             }
           });
         });
         </script>
         <style>
             .icon-red {
                 color:white;
                 background: none;
                 border: none;
                 height: 0%;
                 margin-top: 4%;
                 }
                 .icon-red i{ height: 10px;
                 width: 25px;}
         </style>
         <div class="navmobg">
             <div class="navmob">
                 <div class="ltmob" style="display: flex;justify-content: space-between;">
                     <div>
                         <img class="logo" src="/kvcet logo.png">
                         <p class="logo-text">Welcome <%= user ? user.email : 'Guest' %>
                         </p>
                     </div>
                     <button id="redmob" class="icon-red"><i class="fa-solid fa-x "></i></button>
                 </div>
                 <nav class="webmob">
                     <a href="/admission">Admission</a>
                     <a href="/about">About</a>
                     <a href="/">Home</a>
                     <a href="/register">Register</a>
                     <a href="/login">Login</a>
     
                 </nav>
             </div>
         </div>
     
         <div class="navbars mb-3">
             <div class="navigate">
                 <div class="lt">
                     <img class="logo" src="/kvcet logo.png">
                     <p class="logo-text">Welcome <%= user ? user.email : 'Guest' %>
                     </p>
                 </div>
     
                 <nav class="web">
                     <a href="/admission">Admission</a>
                     <a href="/about">About</a>
                     <a href="/">Home</a>
                     <a href="/register">Register</a>
                     <a href="/login">Login</a>
     
                 </nav>
                 <div class="menu">
                     <div class="menu-line"></div>
                     <div class="menu-line"></div>
                     <div class="menu-line"></div>
     
                 </div>
             </div>
         </div>
    <div class="container mb-5 ">
    
        <div>
            <div class="container-sm " style="padding-top:40px ;">
                <center>
              <h1>Verification</h1>
              <h5 class="textdanger">  
             <p style=" font-family: Arial, Helvetica, sans-serif;">* Please verify  the details  provided are accurate according to your knowledge.* </p></h5>
             <form class="b" data-userid="<%= currentUser._id %>" id="verificationForm">
                <% if (currentUser) { %>
                    <div class="form-group mb-2">
                        <label for="name">Name:</label>
                        <input type="text" class="form-control" name="Name" value="<%= currentUser.username %>" id="name" placeholder="" readonly>
                    </div>
                    <div class="form-group mb-2">
                        <label for="Phone No">Phone No:</label>
                        <input type="text" class="form-control" name="Phonenumber" id="PhoneNo" value="<%= currentUser.phonenumber %>" placeholder="" readonly>
                    </div>
                    <div class="form-group mb-2">
                        <label for="email">Email:</label>
                        <input type="text" class="form-control" name="Email" id="email" value="<%= currentUser.email %>" placeholder="" readonly>
                    </div>
                    <div class="form-group mb-2">
                        <label for="address">Address:</label>
                        <textarea class="form-control" id="address" name="Address" rows="3" readonly><%= currentUser.address %></textarea>
                    </div>
                    <div class="form-group mb-4">
                        <label for="course">Course:</label>
                        <input type="text" class="form-control" name="Course" value="<%= currentUser.course %>" id="course" placeholder="" readonly>
                    </div>
                    <button type="button" class="mb-5 btn btn-danger" id="deleteButton">Cancel</button>
                    <button type="submit" class="mb-5 btn btn-primary" id="correct">Submit</button>
                <% } %>
            </form>
        </center>
        </div>
        </div>
    </div>
</body>

<script>
   const deleteButton = document.getElementById('deleteButton');
const form = document.getElementById('verificationForm');

deleteButton.addEventListener('click', async () => {
    const email = form.Email.value;
    const username = form.Name.value;
    const phonenumber = form.Phonenumber.value;
    const address = form.Address.value;
    const course = form.Course.value;

    try {
        const res = await fetch(`/admission/verification`, {
            method: 'DELETE',
            body: JSON.stringify({ email, username, phonenumber, address, course }),
            headers: {
                'Content-Type': 'application/json'
            }
        });

        if (res.ok) {
            alert("Thankyou for your involement !");
            window.location.assign('/admission');
        } else {
            const contentType = res.headers.get('content-type');
            if (contentType && contentType.includes('application/json')) {
                const data = await res.json();
                alert(data.error);
            } else {
                alert("An unexpected error occurred. Please try again later.");
            }
        }
    } catch (err) {
        console.log(err);
        alert("An unexpected error occurred. Please try again later.");
    }
});

const crtButton = document.getElementById('correct');
crtButton.addEventListener('click', async (e) => {
    e.preventDefault();
    try {
        window.location.assign('/');
    } catch (err) {
        console.log(err);
    }
});





</script>
</html>